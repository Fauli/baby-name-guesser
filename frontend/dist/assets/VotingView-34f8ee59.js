import{d as T,r,w as h,c as t,a as e,t as l,b as i,F as b,e as w,u as v,f as y,o as s,g as x,v as S}from"./index-917e78cb.js";const N={key:0},Y=e("h1",null,"Loading...",-1),j=[Y],A={key:1},C=e("h1",null,"Register and Login to bet 🥳",-1),I=e("p",null,"After you are logged-in you can place your bets!",-1),R=e("br",null,null,-1),B={style:{"font-style":"italic"}},E={key:2},L={key:0},P=e("h1",null,"Thank you for voting 💙",-1),$=e("br",null,null,-1),D=e("p",null,"Transfer the bet money to one of the following accounts to finalize your participation:",-1),F=e("td",{class:"label"},"Amount",-1),z={class:"value"},O=e("td",{class:"label"},"Twint",-1),U={class:"value"},W=e("td",{class:"label"},"Revolut",-1),J={class:"value"},M=e("td",{class:"label"},"Paypal",-1),q={class:"value"},G=e("td",{class:"label"},"IBAN",-1),H={class:"value"},K=e("tr",null,[e("td",{class:"label"},"Important"),e("td",{class:"value"},"Add your name to the payment")],-1),Q=e("br",null,null,-1),X={key:0},Z=e("span",{style:{"text-decoration":"underline"}},"Sometime after you have transferred the money, you will see a confirmation message on this site.",-1),ee={key:1},te=e("span",{class:"rainbow-text",style:{"font-size":"larger","font-weight":"bold","text-decoration":"underline"}},"Your money was recieved and you are officially taking part in the game! Woohoo!",-1),se=e("br",null,null,-1),oe=e("p",null,"Thank you for participating in the name game!",-1),le=e("p",null,"We will be sending out the results after the 20.08.2024 🥰",-1),ne=e("br",null,null,-1),ae=e("h2",null,"Your votes:",-1),ue={key:1},ie=e("h1",null,"Place your guess 🍼",-1),ce=e("p",null,"Select all your guesses, but choose wisely. You can only guess once!",-1),re=e("p",null,"The vote only really counts once you transferred the matching sum.",-1),_e=e("p",null,"You will get the payment information after you placed your votes.",-1),de=e("hr",null,null,-1),he=["value"],ve={class:"message"},pe=e("br",null,null,-1),ye=e("br",null,null,-1),me=e("hr",null,null,-1),fe=e("br",null,null,-1),ge={key:0},be={class:"important"},we={key:0,class:"important-content green"},ke=e("p",null,"Voting successful!",-1),Ve=e("p",null,"You will be redirected in a few seconds...",-1),Te=[ke,Ve],xe={key:1,class:"important-content red"},Se=e("p",null,"Voting has failed!",-1),Ne={key:1},Ye=e("p",null,"You will be voting for:",-1),je={style:{"font-weight":"bold","text-decoration":"underline"}},Ae=e("p",null,"You can use twint, revolut or paypal - please mark your name when transferring 💙",-1),Ce=e("br",null,null,-1),m="/api",Be=T({__name:"VotingView",setup(Ie){const _=r(null);var u=r(""),p=r("");const f=r(""),d=r(""),g=r([]);h(async()=>{const n=`${m}/me`;f.value=await(await fetch(n)).json()}),h(async()=>{const n=`${m}/votes/me`;g.value=await(await fetch(n)).json()}),h(async()=>{const n=`${m}/payments`;d.value=await(await fetch(n)).json()}),h(()=>{u.value="",p.value=""}),h(async()=>{const n=`${m}/names`;_.value=await(await fetch(n)).json()});const c=r([]);function k(){console.log("Submitting vote for",c.value);var n=c.value;fetch("/api/votes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({names:n})}).then(o=>o.json()).then(o=>{console.log("Success:",o),o.email?(u.value="success",setTimeout(()=>{location.reload()},2e3)):(u.value="failure",p.value=o.message)}).catch(o=>{console.error("Error:",o),u.value="failure",p.value=o,alert("Error submitting vote: "+o)})}return(n,o)=>_.value?_.value.message?(s(),t("div",A,[C,I,R,e("p",B,"Details: "+l(_.value.message),1)])):(s(),t("div",E,[f.value.has_voted?(s(),t("div",L,[P,$,D,e("table",null,[e("tr",null,[F,e("td",z,l(g.value.length*10)+".00",1)]),e("tr",null,[O,e("td",U,l(d.value.twint),1)]),e("tr",null,[W,e("td",J,l(d.value.revolut),1)]),e("tr",null,[M,e("td",q,l(d.value.paypal),1)]),e("tr",null,[G,e("td",H,l(d.value.iban),1)]),i(),K]),Q,f.value.has_paid?(s(),t("p",ee,[i("🎉"),te,i("🎉")])):(s(),t("p",X,[i("👉 "),Z,i(" 👈")])),se,oe,le,ne,ae,e("ul",null,[(s(!0),t(b,null,w(g.value,a=>(s(),t("li",{key:a},l(a),1))),128))])])):(s(),t("div",ue,[ie,ce,e("p",null,[i("There are "),e("b",null,l(_.value.names.length),1),i(" available names to choose from.")]),re,_e,de,e("ul",null,[(s(!0),t(b,null,w(_.value.names,a=>(s(),t("p",{key:a.value},[x(e("input",{type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=V=>c.value=V),value:a},null,8,he),[[S,c.value]]),e("span",ve,"   "+l(a),1),pe]))),128))]),ye,me,fe,v(u)==="success"||v(u)==="failure"?(s(),t("div",ge,[e("div",be,[v(u)==="success"?(s(),t("div",we,Te)):y("",!0),v(u)==="failure"?(s(),t("div",xe,[Se,e("p",null,"Reason: "+l(v(p)),1)])):y("",!0)])])):y("",!0),c.value.length>0?(s(),t("div",Ne,[Ye,e("ul",null,[(s(!0),t(b,null,w(c.value,a=>(s(),t("li",{key:a},l(a),1))),128))]),e("p",null,[i("This results in a bet of "),e("span",je,l(c.value.length*10)+" Franken",1)]),Ae])):y("",!0),Ce,e("button",{onClick:k,class:"submit-button"},"Submit Vote")]))])):(s(),t("div",N,j))}});export{Be as default};
