import{d as w,r as l,w as m,a as y,c as s,u as i,b as e,e as d,g as k,h as L,i as _,j as h,k as v,F as V,o as n}from"./index-63b84e4f.js";const b={key:0},x=e("h1",null,"Loading...",-1),C=[x],N={key:1},E=e("h1",null,"Login for the name game!",-1),R={key:0},T={class:"important"},j={key:0,class:"important-content green"},B=e("br",null,null,-1),P={key:1,class:"important-content red"},S=e("p",null,"Login failed!",-1),U=[S],q=e("label",{for:"email"},"Email:",-1),F=e("label",{for:"password"},"Password:",-1),O="http://localhost:8080/api/names",I=w({__name:"LoginView",setup(A){const p=l(null);m(async()=>{const a=`${O}`;p.value=await(await fetch(a)).json()});const r=l(""),c=l("");var o=l("");m(()=>{o.value=""});const f=async()=>{const a={email:r.value,password:c.value};try{(await fetch("http://localhost:8080/api/voters/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok?(console.log("Login successful"),o.value="success"):(console.error("Login failed"),o.value="failure")}catch(t){console.error("Error:",t)}};return(a,t)=>{const g=y("RouterLink");return n(),s(V,null,[p.value?(n(),s("div",N,[E,i(o)==="success"||i(o)==="failure"?(n(),s("div",R,[e("div",T,[i(o)==="success"?(n(),s("div",j,[e("p",null,[d("Login successful! "),B,d("Now you can "),k(g,{to:"/voting"},{default:L(()=>[d("Vote!")]),_:1})])])):_("",!0),i(o)==="failure"?(n(),s("div",P,U)):_("",!0)])])):_("",!0)])):(n(),s("div",b,C)),e("div",null,[e("form",null,[q,h(e("input",{type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=u=>r.value=u),required:""},null,512),[[v,r.value]]),F,h(e("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=u=>c.value=u),required:""},null,512),[[v,c.value]]),e("button",{onClick:f},"Register")])])],64)}}});export{I as default};
