import{d as V,r as _,w as m,a as w,c as t,b as e,t as l,F as f,f as g,u as i,e as d,g as N,h as C,i as h,o as s,m as S}from"./index-52dfefb8.js";const T={key:0},x=e("h1",null,"Loading...",-1),R=[x],L={key:1},E={key:2},j=e("h1",null,"ðŸ‘‘ Top 3 guesses ðŸ‘‘",-1),B=e("p",null,"Get a sneak peek on the 3 top voted names so far!",-1),F=e("hr",null,null,-1),O=e("br",null,null,-1),P={class:"message"},Y=e("br",null,null,-1),A=e("br",null,null,-1),D=e("hr",null,null,-1),G=e("br",null,null,-1),I={key:0},J={class:"important"},U={key:0,class:"important-content green"},$=e("br",null,null,-1),q={key:1,class:"important-content red"},z=e("p",null,"Voting has failed!",-1),H={key:1},K=e("p",null,"You will be voting for:",-1),M={style:{"font-weight":"bold","text-decoration":"underline"}},Q=e("p",null,"You can use twint, revolut or paypal - please mark your name when transferring ðŸ’™",-1),W=e("br",null,null,-1),X="http://localhost:8080/api/votes/top",te=V({__name:"TopVotedNamesView",setup(Z){const a=_(null);var n=_(""),p=_(""),v=1;m(()=>{n.value="",p.value=""}),m(async()=>{const c=`${X}`;a.value=await(await fetch(c)).json()});const u=_([]);function y(){console.log("Submitting vote for",u.value);var c=u.value;fetch("http://localhost:8080/api/votes/top",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({names:c})}).then(o=>o.json()).then(o=>{console.log("Success:",o),(o.email.length=0)?(n.value="failure",p.value=o.message):n.value="success"}).catch(o=>{console.error("Error:",o),alert("Error submitting vote")})}return(c,o)=>{const b=w("RouterLink");return a.value?a.value.message?(s(),t("div",L,[e("p",null,"Cannot fetch the name list: "+l(a.value.message),1)])):(s(),t("div",E,[j,B,F,O,e("ul",null,[(s(!0),t(f,null,g(a.value,(r,k)=>(s(),t("p",{key:k},[e("span",P," Â  "+l(S(v)?v.value++:v++)+". "+l(r),1),Y]))),128))]),A,D,G,i(n)==="success"||i(n)==="failure"?(s(),t("div",I,[e("div",J,[i(n)==="success"?(s(),t("div",U,[e("p",null,[d("Voting successful! "),$,d("Now you can "),N(b,{to:"/voting"},{default:C(()=>[d("Vote!")]),_:1})])])):h("",!0),i(n)==="failure"?(s(),t("div",q,[z,e("p",null,"Reason: "+l(i(p)),1)])):h("",!0)])])):h("",!0),u.value.length>0?(s(),t("div",H,[K,e("ul",null,[(s(!0),t(f,null,g(u.value,r=>(s(),t("li",{key:r},l(r),1))),128))]),e("p",null,[d("This results in a bet of "),e("span",M,l(u.value.length*10)+" Franken",1)]),Q])):h("",!0),W,e("button",{onClick:y,class:"submit-button"},"Submit Vote")])):(s(),t("div",T,R))}}});export{te as default};
