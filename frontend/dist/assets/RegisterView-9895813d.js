import{d as k,r as a,w,c as n,u as l,a as e,f as h,t as V,g as i,k as r,b as y,l as b,o as u}from"./index-c05bcbdd.js";const x={key:0},E=e("h1",null,"Loading...",-1),U=[E],Y={key:1},q=e("h1",null,"Register for the name game!",-1),N=e("p",null,[y("You need the "),e("span",{style:{"font-weight":"bold"}},"special password (Event password)"),y(" in order to register, ask Franz or Kathrin for it :).")],-1),C=e("br",null,null,-1),P=e("br",null,null,-1),S={key:0},T={class:"important"},j={key:0,class:"important-content green"},B=e("p",null," Registration successful! ",-1),D=e("p",null,"You will be redirected shortly...",-1),L=[B,D],M={key:1,class:"important-content red"},O=e("p",null,"Registration failed!",-1),z=e("label",{for:"name"},"Your Name:",-1),A=e("label",{for:"lastname"},"Your Lastname:",-1),F=e("label",{for:"email"},"Your Email (will also be your username):",-1),I=e("label",{for:"password"},"Your Password (min 8 characters):",-1),J=e("label",{for:"password"},"Event Password:",-1),K="/api/names",H=k({__name:"RegisterView",setup($){const g=a(null);w(async()=>{const d=`${K}`;g.value=await(await fetch(d)).json()});const c=a(""),p=a(""),_=a(""),v=a(""),m=a("");var o=a(""),f=a("");w(()=>{o.value=""});function R(){console.log("Registering voter...");const d={name:c.value,last_name:p.value,email:_.value,password:v.value,event_password:m.value};fetch("/api/voters",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then(t=>t.json()).then(t=>{t.email?(console.log("Registration successful"),o.value="success",b.push({path:"/voting"}).then(()=>{b.go(0)})):(console.error("Registration failed"),o.value="failure",f.value="Registration failed, please validate if all information are correct. Details: "+t.message)}).catch(t=>{console.error("Error:",t),o.value="failure",f.value=t,alert("Error submitting vote: "+t)})}return(d,t)=>g.value?(u(),n("div",Y,[q,N,C,P,l(o)==="success"||l(o)==="failure"?(u(),n("div",S,[e("div",T,[l(o)==="success"?(u(),n("div",j,L)):h("",!0),l(o)==="failure"?(u(),n("div",M,[O,e("p",null,V(l(f)),1)])):h("",!0)])])):h("",!0),e("form",null,[z,i(e("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=s=>c.value=s),required:""},null,512),[[r,c.value]]),A,i(e("input",{type:"text",id:"lastname","onUpdate:modelValue":t[1]||(t[1]=s=>p.value=s),required:""},null,512),[[r,p.value]]),F,i(e("input",{type:"email",id:"email","onUpdate:modelValue":t[2]||(t[2]=s=>_.value=s),required:""},null,512),[[r,_.value]]),I,i(e("input",{type:"password",id:"password","onUpdate:modelValue":t[3]||(t[3]=s=>v.value=s),required:"",minlength:"8"},null,512),[[r,v.value]]),J,i(e("input",{type:"text",id:"event_password","onUpdate:modelValue":t[4]||(t[4]=s=>m.value=s),required:""},null,512),[[r,m.value]]),e("button",{type:"button",onClick:R},"Register")])])):(u(),n("div",x,U))}});export{H as default};
