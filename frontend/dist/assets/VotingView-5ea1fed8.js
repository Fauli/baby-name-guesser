import{d as T,r as c,w as d,c as t,a as e,t as o,b as p,F as g,e as b,u as h,f as y,o as s,g as S,v as x}from"./index-9a28889f.js";const N={key:0},j=e("h1",null,"Loading...",-1),A=[j],C={key:1},I=e("h1",null,"Register and Login to bet 🥳",-1),R=e("p",null,"After you are logged-in you can place your bets!",-1),Y=e("br",null,null,-1),B={style:{"font-style":"italic"}},E={key:2},L={key:0},P=e("h1",null,"Thank you for voting 💙",-1),$=e("br",null,null,-1),D=e("p",null,"Transfer the bet money to one of the following accounts to finalize your participation:",-1),F=e("td",{class:"label"},"Amount",-1),O={class:"value"},U=e("td",{class:"label"},"Twint",-1),z={class:"value"},J=e("td",{class:"label"},"Revolut",-1),M={class:"value"},W=e("td",{class:"label"},"Paypal",-1),q={class:"value"},G=e("td",{class:"label"},"IBAN of the little ones bank account",-1),H={class:"value"},K=e("tr",null,[e("td",{class:"label"},"Important"),e("td",{class:"value"},"Add your name to the payment")],-1),Q=e("br",null,null,-1),X=e("p",null,"Thank you for participating in the name game!",-1),Z=e("p",null,"We will be sending out the results after the 20.08.2024 🥰",-1),ee=e("br",null,null,-1),te=e("h2",null,"Your votes:",-1),se={key:1},le=e("h1",null,"Place your guess 🍼",-1),oe=e("p",null,"Select all your guesses, but choose wisely. You can only guess once!",-1),ne=e("p",null,"The vote only really counts once you transferred the matching sum.",-1),ae=e("p",null,"You will get the payment information after you placed your votes.",-1),ue=e("hr",null,null,-1),ie=["value"],ce={class:"message"},_e=e("br",null,null,-1),re=e("br",null,null,-1),de=e("hr",null,null,-1),he=e("br",null,null,-1),ve={key:0},pe={class:"important"},ye={key:0,class:"important-content green"},me=e("p",null,"Voting successful!",-1),fe=[me],ge={key:1,class:"important-content red"},be=e("p",null,"Voting has failed!",-1),we={key:1},ke=e("p",null,"You will be voting for:",-1),Ve={style:{"font-weight":"bold","text-decoration":"underline"}},Te=e("p",null,"You can use twint, revolut or paypal - please mark your name when transferring 💙",-1),Se=e("br",null,null,-1),m="/api",je=T({__name:"VotingView",setup(xe){const _=c(null);var u=c(""),v=c("");const w=c(""),r=c(""),f=c([]);d(async()=>{const n=`${m}/me`;w.value=await(await fetch(n)).json()}),d(async()=>{const n=`${m}/votes/me`;f.value=await(await fetch(n)).json()}),d(async()=>{const n=`${m}/payments`;r.value=await(await fetch(n)).json()}),d(()=>{u.value="",v.value=""}),d(async()=>{const n=`${m}/names`;_.value=await(await fetch(n)).json()});const i=c([]);function k(){console.log("Submitting vote for",i.value);var n=i.value;fetch("/api/votes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({names:n})}).then(l=>l.json()).then(l=>{console.log("Success:",l),l.email?(u.value="success",setTimeout(()=>{location.reload()},2e3)):(u.value="failure",v.value=l.message)}).catch(l=>{console.error("Error:",l),u.value="failure",v.value=l,alert("Error submitting vote: "+l)})}return(n,l)=>_.value?_.value.message?(s(),t("div",C,[I,R,Y,e("p",B,"Details: "+o(_.value.message),1)])):(s(),t("div",E,[w.value.has_voted?(s(),t("div",L,[P,$,D,e("table",null,[e("tr",null,[F,e("td",O,o(f.value.length*10)+".00",1)]),e("tr",null,[U,e("td",z,o(r.value.twint),1)]),e("tr",null,[J,e("td",M,o(r.value.revolut),1)]),e("tr",null,[W,e("td",q,o(r.value.paypal),1)]),e("tr",null,[G,e("td",H,o(r.value.iban),1)]),p(),K]),Q,X,Z,ee,te,e("ul",null,[(s(!0),t(g,null,b(f.value,a=>(s(),t("li",{key:a},o(a),1))),128))])])):(s(),t("div",se,[le,oe,e("p",null,[p("There are "),e("b",null,o(_.value.names.length),1),p(" available names to choose from.")]),ne,ae,ue,e("ul",null,[(s(!0),t(g,null,b(_.value.names,a=>(s(),t("p",{key:a.value},[S(e("input",{type:"checkbox","onUpdate:modelValue":l[0]||(l[0]=V=>i.value=V),value:a},null,8,ie),[[x,i.value]]),e("span",ce,"   "+o(a),1),_e]))),128))]),re,de,he,h(u)==="success"||h(u)==="failure"?(s(),t("div",ve,[e("div",pe,[h(u)==="success"?(s(),t("div",ye,fe)):y("",!0),h(u)==="failure"?(s(),t("div",ge,[be,e("p",null,"Reason: "+o(h(v)),1)])):y("",!0)])])):y("",!0),i.value.length>0?(s(),t("div",we,[ke,e("ul",null,[(s(!0),t(g,null,b(i.value,a=>(s(),t("li",{key:a},o(a),1))),128))]),e("p",null,[p("This results in a bet of "),e("span",Ve,o(i.value.length*10)+" Franken",1)]),Te])):y("",!0),Se,e("button",{onClick:k,class:"submit-button"},"Submit Vote")]))])):(s(),t("div",N,A))}});export{je as default};
