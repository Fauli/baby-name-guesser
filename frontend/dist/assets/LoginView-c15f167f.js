import{d as L,r as a,w as m,h as k,c as t,u as l,a as e,b as _,i as V,j as b,f as p,t as x,g,k as f,F as C,l as h,o as n}from"./index-25ed1bf0.js";const E={key:0},N=e("h1",null,"Loading...",-1),S=[N],j={key:1},R=e("h1",null,"Login for the name game!",-1),T=e("p",null,"Enter your email and password to login, if you do not have a username and password yet, register first",-1),B=e("br",null,null,-1),D={key:0},P={class:"important"},U={key:0,class:"important-content green"},q=e("br",null,null,-1),F={key:1,class:"important-content red"},O=e("p",null,"Login failed!",-1),A=e("label",{for:"email"},"Email:",-1),I=e("label",{for:"password"},"Password:",-1),J="/api/names",z=L({__name:"LoginView",setup(M){const v=a(null);m(async()=>{const i=`${J}`;v.value=await(await fetch(i)).json()});const u=a(""),r=a("");var s=a(""),c=a("");m(()=>{s.value=""});function y(){const i={email:u.value,password:r.value};fetch("/api/voters/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(o=>o.json()).then(o=>{console.log("Success:",o),o.message!="Voter logged in successfully"?(console.log("Login failed"),s.value="failure",c.value=o.message):(console.log("Login successful"),s.value="success",h.push({path:"/voting"}).then(()=>{h.go(0)}))}).catch(o=>{console.error("Error:",o),s.value="failure",c.value=o,alert("Error submitting vote: "+o)})}return(i,o)=>{const w=k("RouterLink");return n(),t(C,null,[v.value?(n(),t("div",j,[R,T,B,l(s)==="success"||l(s)==="failure"?(n(),t("div",D,[e("div",P,[l(s)==="success"?(n(),t("div",U,[e("p",null,[_("Login successful! "),q,_("Now you can "),V(w,{to:"/voting"},{default:b(()=>[_("Vote!")]),_:1})])])):p("",!0),l(s)==="failure"?(n(),t("div",F,[O,e("p",null,"Details: "+x(l(c)),1)])):p("",!0)])])):p("",!0)])):(n(),t("div",E,S)),e("div",null,[e("form",null,[A,g(e("input",{type:"email",id:"email","onUpdate:modelValue":o[0]||(o[0]=d=>u.value=d),required:""},null,512),[[f,u.value]]),I,g(e("input",{type:"password",id:"password","onUpdate:modelValue":o[1]||(o[1]=d=>r.value=d),required:""},null,512),[[f,r.value]]),e("button",{type:"button",onClick:y},"Login")])])],64)}}});export{z as default};
