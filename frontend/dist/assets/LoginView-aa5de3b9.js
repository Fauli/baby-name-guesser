import{d as w,r as l,w as h,h as y,c as s,u as i,a as e,b as d,i as k,j as L,f as _,g as m,k as v,F as V,l as b,o as n}from"./index-ca875564.js";const x={key:0},C=e("h1",null,"Loading...",-1),N=[C],E={key:1},R=e("h1",null,"Login for the name game!",-1),T={key:0},j={class:"important"},B={key:0,class:"important-content green"},P=e("br",null,null,-1),S={key:1,class:"important-content red"},U=e("p",null,"Login failed!",-1),q=[U],F=e("label",{for:"email"},"Email:",-1),O=e("label",{for:"password"},"Password:",-1),A="http://localhost:8080/api/names",J=w({__name:"LoginView",setup(D){const p=l(null);h(async()=>{const a=`${A}`;p.value=await(await fetch(a)).json()});const r=l(""),c=l("");var o=l("");h(()=>{o.value=""});const f=async()=>{const a={email:r.value,password:c.value};try{(await fetch("http://localhost:8080/api/voters/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok?(console.log("Login successful"),o.value="success",b.push("/voting")):(console.error("Login failed"),o.value="failure")}catch(t){console.error("Error:",t)}};return(a,t)=>{const g=y("RouterLink");return n(),s(V,null,[p.value?(n(),s("div",E,[R,i(o)==="success"||i(o)==="failure"?(n(),s("div",T,[e("div",j,[i(o)==="success"?(n(),s("div",B,[e("p",null,[d("Login successful! "),P,d("Now you can "),k(g,{to:"/voting"},{default:L(()=>[d("Vote!")]),_:1})])])):_("",!0),i(o)==="failure"?(n(),s("div",S,q)):_("",!0)])])):_("",!0)])):(n(),s("div",x,N)),e("div",null,[e("form",null,[F,m(e("input",{type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=u=>r.value=u),required:""},null,512),[[v,r.value]]),O,m(e("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=u=>c.value=u),required:""},null,512),[[v,c.value]]),e("button",{onClick:f},"Register")])])],64)}}});export{J as default};
