import{d as b,r as _,w as p,c as t,a as e,t as i,b as v,F as m,e as g,u as c,f as h,o as s,g as k,v as w}from"./index-6493a475.js";const V={key:0},S=e("h1",null,"Loading...",-1),x=[S],C={key:1},T={key:2},N=e("h1",null,"Place your guess 🍼",-1),E=e("p",null,"Select all your guesses, but choose wisely. You can only guess once!",-1),j=e("p",null,"The vote only really counts once you transferred the matching sum",-1),B=e("hr",null,null,-1),F=e("br",null,null,-1),L=["value"],P={class:"message"},R=e("br",null,null,-1),Y=e("br",null,null,-1),D=e("hr",null,null,-1),O=e("br",null,null,-1),U={key:0},A={class:"important"},I={key:0,class:"important-content green"},J=e("p",null,"Voting successful!",-1),M=[J],$={key:1,class:"important-content red"},q=e("p",null,"Voting has failed!",-1),z={key:1},G=e("p",null,"You will be voting for:",-1),H={style:{"font-weight":"bold","text-decoration":"underline"}},K=e("p",null,"You can use twint, revolut or paypal - please mark your name when transferring 💙",-1),Q=e("br",null,null,-1),W="http://localhost:8080/api/names",ee=b({__name:"VotingView",setup(X){const a=_(null);var o=_(""),d=_("");p(()=>{o.value="",d.value=""}),p(async()=>{const r=`${W}`;a.value=await(await fetch(r)).json()});const l=_([]);function f(){console.log("Submitting vote for",l.value);var r=l.value;fetch("http://localhost:8080/api/votes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({names:r})}).then(n=>n.json()).then(n=>{console.log("Success:",n),n.email?o.value="success":(o.value="failure",d.value=n.message)}).catch(n=>{console.error("Error:",n),alert("Error submitting vote")})}return(r,n)=>a.value?a.value.message?(s(),t("div",C,[e("p",null,"Cannot fetch the name list: "+i(a.value.message),1)])):(s(),t("div",T,[N,E,e("p",null,[v("There are "),e("b",null,i(a.value.names.length),1),v(" available names to choose from.")]),j,B,F,e("ul",null,[(s(!0),t(m,null,g(a.value.names,u=>(s(),t("p",{key:u.value},[k(e("input",{type:"checkbox","onUpdate:modelValue":n[0]||(n[0]=y=>l.value=y),value:u},null,8,L),[[w,l.value]]),e("span",P,"   "+i(u),1),R]))),128))]),Y,D,O,c(o)==="success"||c(o)==="failure"?(s(),t("div",U,[e("div",A,[c(o)==="success"?(s(),t("div",I,M)):h("",!0),c(o)==="failure"?(s(),t("div",$,[q,e("p",null,"Reason: "+i(c(d)),1)])):h("",!0)])])):h("",!0),l.value.length>0?(s(),t("div",z,[G,e("ul",null,[(s(!0),t(m,null,g(l.value,u=>(s(),t("li",{key:u},i(u),1))),128))]),e("p",null,[v("This results in a bet of "),e("span",H,i(l.value.length*10)+" Franken",1)]),K])):h("",!0),Q,e("button",{onClick:f,class:"submit-button"},"Submit Vote")])):(s(),t("div",V,x))}});export{ee as default};
