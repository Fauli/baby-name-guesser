import{d as L,r as a,w as v,h as k,c as s,u as l,a as e,e as _,i as V,j as b,f as p,t as x,g as f,k as h,F as C,l as g,o as n}from"./index-dd87c6f2.js";const E={key:0},N=e("h1",null,"Loading...",-1),S=[N],j={key:1},R=e("h1",null,"Login for the name game!",-1),T=e("p",null,"Enter your email and password to login, if you do not have a username and password yet, register first",-1),B=e("br",null,null,-1),D={key:0},P={class:"important"},U={key:0,class:"important-content green"},q=e("br",null,null,-1),F={key:1,class:"important-content red"},O=e("p",null,"Login failed!",-1),A=e("label",{for:"email"},"Email:",-1),I=e("label",{for:"password"},"Password:",-1),J="/api/names",z=L({__name:"LoginView",setup(M){const m=a(null);v(async()=>{const i=`${J}`;m.value=await(await fetch(i)).json()});const u=a(""),r=a("");var t=a(""),c=a("");v(()=>{t.value=""});function y(){const i={email:u.value,password:r.value};fetch("/api/voters/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(o=>o.json()).then(o=>{console.log("Success:",o),o.email?(console.log("Login successful"),t.value="success",g.push({path:"/voting"}).then(()=>{g.go(0)})):(console.log("Login failed"),t.value="failure",c.value=o.message)}).catch(o=>{console.error("Error:",o),t.value="failure",c.value=o,alert("Error submitting vote: "+o)})}return(i,o)=>{const w=k("RouterLink");return n(),s(C,null,[m.value?(n(),s("div",j,[R,T,B,l(t)==="success"||l(t)==="failure"?(n(),s("div",D,[e("div",P,[l(t)==="success"?(n(),s("div",U,[e("p",null,[_("Login successful! "),q,_("Now you can "),V(w,{to:"/voting"},{default:b(()=>[_("Vote!")]),_:1})])])):p("",!0),l(t)==="failure"?(n(),s("div",F,[O,e("p",null,"Details: "+x(l(c)),1)])):p("",!0)])])):p("",!0)])):(n(),s("div",E,S)),e("div",null,[e("form",null,[A,f(e("input",{type:"email",id:"email","onUpdate:modelValue":o[0]||(o[0]=d=>u.value=d),required:""},null,512),[[h,u.value]]),I,f(e("input",{type:"password",id:"password","onUpdate:modelValue":o[1]||(o[1]=d=>r.value=d),required:""},null,512),[[h,r.value]]),e("button",{type:"submit",onClick:y},"Login")])])],64)}}});export{z as default};
