import{d as V,r,w as d,c as t,a as e,t as l,b as y,F as g,e as b,u as _,f as v,o as n,g as T,v as S}from"./index-44dbe67b.js";const x={key:0},j=e("h1",null,"Loading...",-1),C=[j],N={key:1},R=e("h1",null,"Register and Login to bet 🥳",-1),E=e("p",null,"After you are logged-in you can place your bets!",-1),L=e("br",null,null,-1),P={style:{"font-style":"italic"}},B={key:2},D={key:0},F=e("h1",null,"Thank you for voting 💙",-1),I=e("br",null,null,-1),Y=e("p",null,"Transfer the bet money to one of the following accounts to finalize your participation:",-1),$=e("td",null,"Twint",-1),A=e("td",null,"Revolut",-1),O=e("td",null,"Paypal",-1),U=e("br",null,null,-1),z=e("p",null,"Thank you for participating in the name game!",-1),J=e("p",null,"We will be sending out the results after the 20.08.2024 🥰",-1),M={key:1},W=e("h1",null,"Place your guess 🍼",-1),q=e("p",null,"Select all your guesses, but choose wisely. You can only guess once!",-1),G=e("p",null,"The vote only really counts once you transferred the matching sum",-1),H=e("hr",null,null,-1),K=e("br",null,null,-1),Q=["value"],X={class:"message"},Z=e("br",null,null,-1),ee=e("br",null,null,-1),te=e("hr",null,null,-1),ne=e("br",null,null,-1),oe={key:0},le={class:"important"},se={key:0,class:"important-content green"},ae=e("p",null,"Voting successful!",-1),ue=[ae],ie={key:1,class:"important-content red"},ce=e("p",null,"Voting has failed!",-1),re={key:1},_e=e("p",null,"You will be voting for:",-1),he={style:{"font-weight":"bold","text-decoration":"underline"}},de=e("p",null,"You can use twint, revolut or paypal - please mark your name when transferring 💙",-1),ve=e("br",null,null,-1),f="http://localhost:8080/api",fe=V({__name:"VotingView",setup(pe){const i=r(null);var a=r(""),p=r("");const m=r(""),h=r("");d(async()=>{const s=`${f}/me`;m.value=await(await fetch(s)).json()}),d(async()=>{const s=`${f}/payments`;h.value=await(await fetch(s)).json()}),d(()=>{a.value="",p.value=""}),d(async()=>{const s=`${f}/names`;i.value=await(await fetch(s)).json()});const u=r([]);function k(){console.log("Submitting vote for",u.value);var s=u.value;fetch("http://localhost:8080/api/votes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({names:s})}).then(o=>o.json()).then(o=>{console.log("Success:",o),o.email?(a.value="success",setTimeout(()=>{location.reload()},2e3)):(a.value="failure",p.value=o.message)}).catch(o=>{console.error("Error:",o),alert("Error submitting vote")})}return(s,o)=>i.value?i.value.message?(n(),t("div",N,[R,E,L,e("p",P,"Details: "+l(i.value.message),1)])):(n(),t("div",B,[m.value.has_voted?(n(),t("div",D,[F,I,Y,e("table",null,[e("tr",null,[$,e("td",null,l(h.value.twint),1)]),e("tr",null,[A,e("td",null,l(h.value.revolut),1)]),e("tr",null,[O,e("td",null,l(h.value.paypal),1)])]),U,z,J])):(n(),t("div",M,[W,q,e("p",null,[y("There are "),e("b",null,l(i.value.names.length),1),y(" available names to choose from.")]),G,H,K,e("ul",null,[(n(!0),t(g,null,b(i.value.names,c=>(n(),t("p",{key:c.value},[T(e("input",{type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=w=>u.value=w),value:c},null,8,Q),[[S,u.value]]),e("span",X,"   "+l(c),1),Z]))),128))]),ee,te,ne,_(a)==="success"||_(a)==="failure"?(n(),t("div",oe,[e("div",le,[_(a)==="success"?(n(),t("div",se,ue)):v("",!0),_(a)==="failure"?(n(),t("div",ie,[ce,e("p",null,"Reason: "+l(_(p)),1)])):v("",!0)])])):v("",!0),u.value.length>0?(n(),t("div",re,[_e,e("ul",null,[(n(!0),t(g,null,b(u.value,c=>(n(),t("li",{key:c},l(c),1))),128))]),e("p",null,[y("This results in a bet of "),e("span",he,l(u.value.length*10)+" Franken",1)]),de])):v("",!0),ve,e("button",{onClick:k,class:"submit-button"},"Submit Vote")]))])):(n(),t("div",x,C))}});export{fe as default};
