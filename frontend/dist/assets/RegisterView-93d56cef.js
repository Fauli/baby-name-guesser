import{d as R,r as a,w,c as n,u as l,a as e,f as h,t as k,g as i,k as r,l as y,o as u}from"./index-abfec4bb.js";const V={key:0},x=e("h1",null,"Loading...",-1),E=[x],U={key:1},Y=e("h1",null,"Register for the name game!",-1),q=e("p",null,"You need the special password (Event password) in order to register, ask Franz or Kathrin for it :).",-1),C=e("br",null,null,-1),N=e("br",null,null,-1),P={key:0},S={class:"important"},j={key:0,class:"important-content green"},B=e("p",null," Registration successful! ",-1),D=e("p",null,"You will be redirected shortly...",-1),L=[B,D],T={key:1,class:"important-content red"},M=e("p",null,"Registration failed!",-1),O=e("label",{for:"name"},"Your Name:",-1),z=e("label",{for:"lastname"},"Your Lastname:",-1),A=e("label",{for:"email"},"Your Email (will also be your username):",-1),F=e("label",{for:"password"},"Your Password (min 8 characters):",-1),I=e("label",{for:"password"},"Event Password:",-1),J="/api/names",G=R({__name:"RegisterView",setup(K){const g=a(null);w(async()=>{const d=`${J}`;g.value=await(await fetch(d)).json()});const c=a(""),p=a(""),_=a(""),v=a(""),m=a("");var o=a(""),f=a("");w(()=>{o.value=""});function b(){console.log("Registering voter...");const d={name:c.value,last_name:p.value,email:_.value,password:v.value,event_password:m.value};fetch("/api/voters",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then(t=>t.json()).then(t=>{t.email?(console.log("Registration successful"),o.value="success",y.push({path:"/voting"}).then(()=>{y.go(0)})):(console.error("Registration failed"),o.value="failure",f.value="Registration failed, please validate if all information are correct. Details: "+t.message)}).catch(t=>{console.error("Error:",t),o.value="failure",f.value=t,alert("Error submitting vote: "+t)})}return(d,t)=>g.value?(u(),n("div",U,[Y,q,C,N,l(o)==="success"||l(o)==="failure"?(u(),n("div",P,[e("div",S,[l(o)==="success"?(u(),n("div",j,L)):h("",!0),l(o)==="failure"?(u(),n("div",T,[M,e("p",null,k(l(f)),1)])):h("",!0)])])):h("",!0),e("form",null,[O,i(e("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=s=>c.value=s),required:""},null,512),[[r,c.value]]),z,i(e("input",{type:"text",id:"lastname","onUpdate:modelValue":t[1]||(t[1]=s=>p.value=s),required:""},null,512),[[r,p.value]]),A,i(e("input",{type:"email",id:"email","onUpdate:modelValue":t[2]||(t[2]=s=>_.value=s),required:""},null,512),[[r,_.value]]),F,i(e("input",{type:"password",id:"password","onUpdate:modelValue":t[3]||(t[3]=s=>v.value=s),required:"",minlength:"8"},null,512),[[r,v.value]]),I,i(e("input",{type:"text",id:"event_password","onUpdate:modelValue":t[4]||(t[4]=s=>m.value=s),required:""},null,512),[[r,m.value]]),e("button",{type:"button",onClick:b},"Register")])])):(u(),n("div",V,E))}});export{G as default};
