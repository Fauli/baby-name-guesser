import{d as k,r as h,w as p,a as w,c as s,b as e,e as u,t as i,F as m,f,u as c,g as V,h as x,i as d,o,j as S,v as C}from"./index-63b84e4f.js";const N={key:0},T=e("h1",null,"Loading...",-1),L=[T],R={key:1},j=e("h1",null,"Place your guess 🍼",-1),E=e("p",null,"Select all your guesses, but choose wisely. You can only guess once!",-1),B=e("p",null,"The vote only really counts once you transferred the matching sum",-1),F=e("hr",null,null,-1),P=e("br",null,null,-1),Y=["value"],D={class:"message"},O=e("br",null,null,-1),U=e("br",null,null,-1),A=e("hr",null,null,-1),I=e("br",null,null,-1),J={key:0},M={class:"important"},$={key:0,class:"important-content green"},q=e("br",null,null,-1),z={key:1,class:"important-content red"},G=e("p",null,"Voting has failed!",-1),H={key:1},K=e("p",null,"You will be voting for:",-1),Q={style:{"font-weight":"bold","text-decoration":"underline"}},W=e("p",null,"You can use twint, revolut or paypal - please mark your name when transferring 💙",-1),X=e("br",null,null,-1),Z="http://localhost:8080/api/names",se=k({__name:"VotingView",setup(ee){const r=h(null);var n=h(""),v=h("");p(()=>{n.value="",v.value=""}),p(async()=>{const _=`${Z}`;r.value=await(await fetch(_)).json()});const l=h([]);function g(){console.log("Submitting vote for",l.value);var _=l.value;fetch("http://localhost:8080/api/votes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({names:_})}).then(t=>t.json()).then(t=>{console.log("Success:",t),t.status!==200?(n.value="failure",v.value=t.message):n.value="success"}).catch(t=>{console.error("Error:",t),alert("Error submitting vote")})}return(_,t)=>{const y=w("RouterLink");return r.value?(o(),s("div",R,[j,E,e("p",null,[u("There are "),e("b",null,i(r.value.names.length),1),u(" available names to choose from.")]),B,F,P,e("ul",null,[(o(!0),s(m,null,f(r.value.names,a=>(o(),s("p",{key:a.value},[S(e("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=b=>l.value=b),value:a},null,8,Y),[[C,l.value]]),e("span",D,"   "+i(a),1),O]))),128))]),U,A,I,c(n)==="success"||c(n)==="failure"?(o(),s("div",J,[e("div",M,[c(n)==="success"?(o(),s("div",$,[e("p",null,[u("Voting successful! "),q,u("Now you can "),V(y,{to:"/voting"},{default:x(()=>[u("Vote!")]),_:1})])])):d("",!0),c(n)==="failure"?(o(),s("div",z,[G,e("p",null,"Reason: "+i(c(v)),1)])):d("",!0)])])):d("",!0),l.value.length>0?(o(),s("div",H,[K,e("ul",null,[(o(!0),s(m,null,f(l.value,a=>(o(),s("li",{key:a},i(a),1))),128))]),e("p",null,[u("This results in a bet of "),e("span",Q,i(l.value.length*10)+" Franken",1)]),W])):d("",!0),X,e("button",{onClick:g,class:"submit-button"},"Submit Vote")])):(o(),s("div",N,L))}}});export{se as default};
