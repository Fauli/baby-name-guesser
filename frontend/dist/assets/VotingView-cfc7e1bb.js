import{d as k,r as h,w as p,a as w,c as t,b as e,t as i,e as c,F as m,f as g,u as r,g as V,h as x,i as d,o as s,j as C,v as S}from"./index-52dfefb8.js";const N={key:0},T=e("h1",null,"Loading...",-1),L=[T],R={key:1},j={key:2},E=e("h1",null,"Place your guess 🍼",-1),B=e("p",null,"Select all your guesses, but choose wisely. You can only guess once!",-1),F=e("p",null,"The vote only really counts once you transferred the matching sum",-1),P=e("hr",null,null,-1),Y=e("br",null,null,-1),D=["value"],O={class:"message"},U=e("br",null,null,-1),A=e("br",null,null,-1),I=e("hr",null,null,-1),J=e("br",null,null,-1),M={key:0},$={class:"important"},q={key:0,class:"important-content green"},z=e("br",null,null,-1),G={key:1,class:"important-content red"},H=e("p",null,"Voting has failed!",-1),K={key:1},Q=e("p",null,"You will be voting for:",-1),W={style:{"font-weight":"bold","text-decoration":"underline"}},X=e("p",null,"You can use twint, revolut or paypal - please mark your name when transferring 💙",-1),Z=e("br",null,null,-1),ee="http://localhost:8080/api/names",oe=k({__name:"VotingView",setup(te){const a=h(null);var n=h(""),v=h("");p(()=>{n.value="",v.value=""}),p(async()=>{const _=`${ee}`;a.value=await(await fetch(_)).json()});const l=h([]);function f(){console.log("Submitting vote for",l.value);var _=l.value;fetch("http://localhost:8080/api/votes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({names:_})}).then(o=>o.json()).then(o=>{console.log("Success:",o),o.email?n.value="success":(n.value="failure",v.value=o.message)}).catch(o=>{console.error("Error:",o),alert("Error submitting vote")})}return(_,o)=>{const y=w("RouterLink");return a.value?a.value.message?(s(),t("div",R,[e("p",null,"Cannot fetch the name list: "+i(a.value.message),1)])):(s(),t("div",j,[E,B,e("p",null,[c("There are "),e("b",null,i(a.value.names.length),1),c(" available names to choose from.")]),F,P,Y,e("ul",null,[(s(!0),t(m,null,g(a.value.names,u=>(s(),t("p",{key:u.value},[C(e("input",{type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=b=>l.value=b),value:u},null,8,D),[[S,l.value]]),e("span",O,"   "+i(u),1),U]))),128))]),A,I,J,r(n)==="success"||r(n)==="failure"?(s(),t("div",M,[e("div",$,[r(n)==="success"?(s(),t("div",q,[e("p",null,[c("Voting successful! "),z,c("Now you can "),V(y,{to:"/voting"},{default:x(()=>[c("Vote!")]),_:1})])])):d("",!0),r(n)==="failure"?(s(),t("div",G,[H,e("p",null,"Reason: "+i(r(v)),1)])):d("",!0)])])):d("",!0),l.value.length>0?(s(),t("div",K,[Q,e("ul",null,[(s(!0),t(m,null,g(l.value,u=>(s(),t("li",{key:u},i(u),1))),128))]),e("p",null,[c("This results in a bet of "),e("span",W,i(l.value.length*10)+" Franken",1)]),X])):d("",!0),Z,e("button",{onClick:f,class:"submit-button"},"Submit Vote")])):(s(),t("div",N,L))}}});export{oe as default};
