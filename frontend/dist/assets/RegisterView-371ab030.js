import{d as R,r as a,w,c as n,u as d,a as e,f,g as l,k as i,l as y,o as r}from"./index-0b623eeb.js";const k={key:0},V=e("h1",null,"Loading...",-1),x=[V],E={key:1},U=e("h1",null,"Register for the name game!",-1),q=e("p",null,"You need the special password (Event password) in order to register, ask Franz or Kathrin for it :).",-1),Y=e("br",null,null,-1),C=e("br",null,null,-1),N={key:0},P={class:"important"},j={key:0,class:"important-content green"},B=e("p",null," Registration successful! ",-1),L=[B],S={key:1,class:"important-content red"},T=e("p",null,"Registration failed!",-1),D=[T],M=e("label",{for:"name"},"Your Name:",-1),O=e("label",{for:"lastname"},"Your Lastname:",-1),z=e("label",{for:"email"},"Your Email (will also be your username):",-1),A=e("label",{for:"password"},"Your Password:",-1),F=e("label",{for:"password"},"Event Password:",-1),I="/api/names",$=R({__name:"RegisterView",setup(J){const h=a(null);w(async()=>{const u=`${I}`;h.value=await(await fetch(u)).json()});const c=a(""),_=a(""),p=a(""),v=a(""),m=a("");var o=a(""),g=a("");w(()=>{o.value=""});function b(){console.log("Registering voter...");const u={name:c.value,last_name:_.value,email:p.value,password:v.value,event_password:m.value};fetch("/api/voters",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then(t=>t.json()).then(t=>{t.email?(console.log("Registration successful"),o.value="success",y.push({path:"/voting"}).then(()=>{y.go(0)})):(console.error("Registration failed"),o.value="failure",g.value="Registration failed, please validate if all information are correct. Details: "+t.message)}).catch(t=>{console.error("Error:",t),o.value="failure",g.value=t,alert("Error submitting vote: "+t)})}return(u,t)=>h.value?(r(),n("div",E,[U,q,Y,C,d(o)==="success"||d(o)==="failure"?(r(),n("div",N,[e("div",P,[d(o)==="success"?(r(),n("div",j,L)):f("",!0),d(o)==="failure"?(r(),n("div",S,D)):f("",!0)])])):f("",!0),e("form",null,[M,l(e("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=s=>c.value=s),required:""},null,512),[[i,c.value]]),O,l(e("input",{type:"text",id:"lastname","onUpdate:modelValue":t[1]||(t[1]=s=>_.value=s),required:""},null,512),[[i,_.value]]),z,l(e("input",{type:"email",id:"email","onUpdate:modelValue":t[2]||(t[2]=s=>p.value=s),required:""},null,512),[[i,p.value]]),A,l(e("input",{type:"password",id:"password","onUpdate:modelValue":t[3]||(t[3]=s=>v.value=s),required:"",minlength:"8"},null,512),[[i,v.value]]),F,l(e("input",{type:"text",id:"event_password","onUpdate:modelValue":t[4]||(t[4]=s=>m.value=s),required:""},null,512),[[i,m.value]]),e("button",{type:"submit",onClick:b},"Register")])])):(r(),n("div",k,x))}});export{$ as default};
